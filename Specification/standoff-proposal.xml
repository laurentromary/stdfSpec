<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_all.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_all.rng" type="application/xml"
	schematypens="http://purl.oclc.org/dsdl/schematron"?>
<TEI xmlns="http://www.tei-c.org/ns/1.0" xmlns:rng="http://relaxng.org/ns/structure/1.0">
    <teiHeader>
        <fileDesc>
            <titleStmt>
                <title>Proposal for encoding standoff annotations in TEI</title>
                <author>
                    <persName>
                        <forename>Peter</forename>
                        <surname>Stadler</surname>
                    </persName>
                </author>
                <author>
                    <persName>
                        <forename>Laurent</forename>
                        <surname>Romary</surname>
                    </persName>
                </author>
            </titleStmt>
            <publicationStmt>
                <authority>Berlin task force "standoff"</authority>
                <availability>
                    <!-- no lincence allowed -->
                    <p>CC+BY and BSD-2 licences</p>
                </availability>
            </publicationStmt>
            <sourceDesc>
                <p>...</p>
            </sourceDesc>
        </fileDesc>
    </teiHeader>
    <text>
        <body>
            <schemaSpec ident="standoff-proposal" start="TEI teiCorpus">
                <moduleRef key="tei"/>
                <moduleRef key="core"/>
                <moduleRef key="analysis"/>
                <moduleRef key="certainty"/>
                <moduleRef key="corpus"/>
                <moduleRef key="dictionaries"/>
                <moduleRef key="drama"/>
                <moduleRef key="figures"/>
                <moduleRef key="gaiji"/>
                <moduleRef key="header"/>
                <moduleRef key="iso-fs"/>
                <moduleRef key="linking"/>
                <moduleRef key="msdescription"/>
                <moduleRef key="namesdates"/>
                <moduleRef key="nets"/>
                <moduleRef key="spoken"/>
                <moduleRef key="textcrit"/>
                <moduleRef key="textstructure"/>
                <moduleRef key="transcr"/>
                <moduleRef key="verse"/>
                <moduleRef key="tagdocs"/>

                <moduleSpec ident="standOff">
                    <desc>Elements to allow stand-off annotations in a TEI document</desc>
                </moduleSpec>

                <elementSpec ident="standOff" mode="add" ns="http://standoff.proposal"
                    module="standOff">
                    <desc>Container element for standoff annotations</desc>
                    <classes>
                        <memberOf key="model.resourceLike" mode="add"/>
                        <memberOf key="att.global" mode="add"/>
                        <memberOf key="att.datcat" mode="add"/>
                        <memberOf key="att.ascribed" mode="add"/>
                        <memberOf key="att.datable.w3c" mode="add"/>
                        <memberOf key="att.typed" mode="add"/>
                        <memberOf key="att.responsibility" mode="add"/>
                        <memberOf key="att.pointing" mode="add"/>
                    </classes>
                    <content>
                        <rng:optional>
                            <rng:ref name="teiHeader"/>
                        </rng:optional>
                        <rng:zeroOrMore>
                            <rng:ref name="listAnnotation"/>
                        </rng:zeroOrMore>
                        <rng:zeroOrMore>
                            <rng:ref name="standOff"/>
                        </rng:zeroOrMore>
                    </content>
                </elementSpec>

               <!-- <elementSpec ident="standOffHeader" mode="add" ns="http://standoff.proposal"
                    module="standOff">
                    <desc>Metadata for the <gi>stdf</gi> element(s)</desc>
                    <content>
                        <rng:interleave>
                            <rng:optional>
                                <rng:ref name="titleStmt"/>
                            </rng:optional>
                            <rng:optional>
                                <rng:ref name="publicationStmt"/>
                            </rng:optional>
                            <rng:optional>
                                <rng:ref name="notesStmt"/>
                            </rng:optional>
                            <rng:optional>
                                <rng:ref name="encodingDesc"/>
                            </rng:optional>
                            <rng:optional>
                                <rng:ref name="profileDesc"/>
                            </rng:optional>
                            <rng:optional>
                                <rng:ref name="revisionDesc"/>
                            </rng:optional>
                        </rng:interleave>
                    </content>
                </elementSpec>-->

                <elementSpec ident="listAnnotation" mode="add" ns="http://standoff.proposal"
                    module="standOff">
                    <desc>Groups together various annotations, for instance for parallel
                        interpretations of a spoken segment</desc>
                    <classes>
                        <memberOf key="model.annotation"/>
<!--                        <memberOf key="model.divPart.spoken"/>-->
                        <memberOf key="att.timed"/>
                        <memberOf key="att.global"/>
                        <memberOf key="att.ascribed"/>
                        <memberOf key="att.typed"/>
                        <memberOf key="att.declaring"/>
                    </classes>
                    <content>
                        <rng:oneOrMore>
                           <rng:ref name="model.annotation"/>
                        </rng:oneOrMore>
                    </content>
                   <remarks>
                      <p>The global xml:base  attribute is used on this element both to specify the target of the annotations and to serve as the base for any
                      target URIs contained by the annotation elements. If this attribute is
                      not supplied, the listAnnotation must be embedded within the complete TEI
                      document to which it applies. </p>
                   </remarks>
                </elementSpec>

                <classSpec type="model" ident="model.annotation" mode="add" module="standOff">
                    <desc>class of elements containing standoff annotation</desc>
                </classSpec>

                <!--       *****       -->
                <!-- Following are existing TEI declarations where we add our new class(es) -->

                <classSpec type="model" ident="model.global.meta" mode="change">
                    <classes mode="change">
                        <memberOf key="model.annotation" mode="add"/>
                    </classes>
                </classSpec>

                <classSpec type="model" ident="model.listLike" mode="change">
                    <classes mode="change">
                        <memberOf key="model.annotation" mode="add"/>
                    </classes>
                </classSpec>

                <classSpec type="model" ident="model.entryLike" mode="change">
                    <classes mode="change">
                        <memberOf key="model.annotation" mode="add"/>
                    </classes>
                </classSpec>

                <elementSpec ident="listBibl" mode="change" module="core">
                    <classes mode="change">
                        <memberOf key="model.annotation" mode="add"/>
                    </classes>
                </elementSpec>

                <elementSpec ident="listChange" mode="change" module="header">
                    <classes mode="change">
                        <memberOf key="model.annotation" mode="add"/>
                    </classes>
                </elementSpec>
               
               <elementSpec ident="graph" mode="change" module="header">
                  <classes mode="change">
                     <memberOf key="model.annotation" mode="add"/>
                  </classes>
               </elementSpec>
               
               <elementSpec ident="forest" mode="change" module="header">
                  <classes mode="change">
                     <memberOf key="model.annotation" mode="add"/>
                  </classes>
               </elementSpec>
               
               <elementSpec ident="listForest" mode="change" module="header">
                  <classes mode="change">
                     <memberOf key="model.annotation" mode="add"/>
                  </classes>
               </elementSpec>
               
               <elementSpec ident="tree" mode="change" module="header">
                  <classes mode="change">
                     <memberOf key="model.annotation" mode="add"/>
                  </classes>
               </elementSpec>
               
               <elementSpec ident="eTree" mode="change" module="header">
                  <classes mode="change">
                     <memberOf key="model.annotation" mode="add"/>
                  </classes>
               </elementSpec>
                
                <elementSpec ident="zone" module="transcr" mode="change">
                    <classes mode="change">
                        <memberOf mode="add" key="model.annotation"/>
                    </classes>
                </elementSpec>
               
               <!--graph, listgraph forest, -->

                <!-- Need to exclude our namespace from egXML to prevent "conflicting ID-types for attribute" errors -->
                <macroSpec ident="macro.anyXML" mode="change" module="tagdocs">
                    <content>
                        <rng:element>
                            <rng:anyName>
                                <rng:except>
                                    <rng:nsName ns="http://www.tei-c.org/ns/1.0"/>
                                    <rng:name ns="http://www.tei-c.org/ns/Examples">egXML</rng:name>
                                    <rng:nsName ns="http://standoff.proposal"/>
                                </rng:except>
                            </rng:anyName>
                            <rng:zeroOrMore>
                                <rng:attribute>
                                    <rng:anyName/>
                                </rng:attribute>
                            </rng:zeroOrMore>
                            <rng:zeroOrMore>
                                <rng:choice>
                                    <rng:text/>
                                    <rng:ref name="macro.anyXML"/>
                                </rng:choice>
                            </rng:zeroOrMore>
                        </rng:element>
                    </content>
                </macroSpec>

            </schemaSpec>
        </body>
    </text>
</TEI>
