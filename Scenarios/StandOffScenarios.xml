<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_all.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_all.rng" type="application/xml"
	schematypens="http://purl.oclc.org/dsdl/schematron"?>
<TEI xmlns="http://www.tei-c.org/ns/1.0">
   <teiHeader>
      <fileDesc>
         <titleStmt>
            <title>Stand-off use cases</title>
            <author>
               <persName>
                  <forename>Laurent</forename>
                  <surname>Romary</surname>
               </persName>
               <affiliation>
                  <orgName>Inria</orgName>
               </affiliation>
            </author>
         </titleStmt>
         <publicationStmt>
            <authority>TEI</authority>
            <availability>
               <licence/>
            </availability>
         </publicationStmt>
         <sourceDesc>
            <p>Born digital document</p>
         </sourceDesc>
      </fileDesc>
   </teiHeader>
   <text>
      <body>
         <div xml:id="Introduction">
            <head>Introduction</head>
            <p>This document compiles various concrete use cases implementing the suggested <gi>standOff</gi> element in order to refine the possible constraints that may bear upon it and its
               sub-elements. It is based on the experience gained in various projects since the initial workshop that took place in <date>...</date> and that launched the definition of this element as
               well as on some ongoing activities that are being pursued in several national projects in France and Germany (among others), in international institutions (EPO) as well as in the
               content of several ISO projects (some of which have already been published as standards).</p>
            <p>The major conclusions that can be drawn from these use cases are the following:</p>
            <list>
               <item>...</item>
            </list>
         </div>
         <div xml:id="OverviewSO">
            <head>Overview of the <gi>standOff</gi> proposal</head>
            <note>This section should be conceived as text that would go in the guidelines</note>
            <p>This proposal implements embedded stand-off annotations, i.e. annotations to an existing document that have the following properties:</p>
            <list>
               <item>Annotations do not alter any part of the document itself, header nor content</item>
               <item>There may be as many complementary and competing annotations attached to a given document as wanted</item>
               <item>Annotations occur at a precidsely determined place in the TEI docuement organisation, namely as an addtional resource, child of <gi>TEI</gi> or <gi>teiCorpus</gi>
                  <note place="margin">We need a scenario for such a usage</note></item>
               <item>Annotations are conveyed with their specific meta-data</item>
            </list>
            <div>
               <head>The <gi>standOff</gi> element</head>
               <p>The <gi>standOff</gi> element is the container of any group of coherent annotations attached to a TEI document. Its main characteristics are:</p>
               <list>
                  <item>It is attached to the top level of a TEI document by being a member of <code>model.resourceLike</code></item>
                  <item>Its content model resembles that of a TEI document by comprising a header (<gi>teiHeader</gi>), additional resources (<code>model.resourceLike</code>) and a content (one or
                     several <gi>listAnnotation</gi> elements)</item>
               </list>
               <p>The actual nature of the <gi>standOff</gi> can be further specified by means of two attributes:</p>
               <list>
                  <item><att>type</att>: to indicate the general type of annotations which is being represented</item>
                  <item><att>notation</att>: to elicit the specific notation used for the corresponding type of annotation in reference to an external standard or a documented practice.</item>
               </list>
            </div>
            <div>
               <head>The <gi>listAnnotation</gi> element</head>
               <p>The <gi>listAnnotation</gi> element is a general container allowing one to structure annotation in various subsections. In this respect, its role is analogous to the one played by
                     <gi>div</gi> in a general TEI document. Still, <gi>div</gi> could not be taken up here in order to be able to keep to a very restrained content model.</p>
               <p>As an iterative and recursive element, <gi>listAnnotation</gi> can be typed to indicate the organisational logic of the annotations.</p>
               <p>The <gi>listAnnotation</gi> element is also structured like other listXXX elements so that it may start with <code>model.headLike</code> memebrs (e.g. <gi>head</gi>).</p>
            </div>
            <div>
               <head>Updating the <gi>annotationBlock</gi> element</head>
               <p>The <gi>annotationBlock</gi> was initially conceive as a construct with a dual role for the inline and stand-off annotation of textual content. For the sake of having it quickly
                  inserted in the TEI guidelines, only a limited range of usages has been documented so far.</p>
               <p>In the stand-off annotation proposal, <gi>annotationBlock</gi> takes amajor role as the elementary container for annotations.</p>
            </div>
            <div>
               <head>Taking up existing annotations mechanisms from the TEI vocabulary</head>
               <p>span, zone, interp, link, and corresponding attributes</p>
            </div>
            <div>
               <head>Linking components</head>
            </div>

         </div>
         <div xml:id="OAModel">
            <head>Aligning with the Open Annotation model</head>
            <div>
               <head>Quick presentation of the Open Annotation model</head>
               <p>The <ref target="#WADM">Open Annotation</ref> data model articulates around three complementary components:</p>
               <list>
                  <item>Target: that identifies one or several <mentioned>resources</mentioned> about which something is said </item>
                  <item>Body: that contains what is said about the resource</item>
                  <item>Annotation: that links one or several targets with 0-n bodies</item>
               </list>
               <p>This model, which decouples resources and what is said about them by means of the <mentioned>annotation</mentioned> component is highly flexible and powerful. It could be reflected
                  in the <gi>standOff</gi> construct as follows:</p>
               <p>It is suggested that the Open Annotation model could be implemented as follows:</p>
               <list>
                  <item><p>The <mentioned>Target</mentioned> component</p>
                     <note place="inline">See the proposed implementation of <gi>annotationBlock</gi>: we suggest to introduce a class <code>model.OATarget</code></note>
                  </item>
                  <item>
                     <p>The <mentioned>Body</mentioned> component can be implemented by means of a wide variety of elements depending on the various use cases that we describe here.</p>
                     <note place="inline">See the proposed implementation of <gi>annotationBlock</gi>: we suggest to introduce a class <code>model.OABody</code></note>
                  </item>
                  <item><p>The <mentioned>Annotation</mentioned> component is implemented by means of the <gi>interp</gi> element complemented with the three following atributes:</p>
                     <list>
                        <item><att>type</att></item>
                        <item><att>inst</att></item>
                        <item><att>ana</att></item>
                     </list>
                     <p>Additional elements could probably be used here, but we should provide univocal guidance here, in order to avoid content model ambiguities and in general too much heterogeneous
                        implementations of the OA model.</p>
                     <note place="inline">See the proposed implementation of <gi>annotationBlock</gi>: we suggest to introduce a class <code>model.OAAnnotation</code></note></item>
               </list>
            </div>

            <div>
               <head>Simplest annotation with <gi>note</gi></head>
               <egXML xmlns="http://www.tei-c.org/ns/Examples">
                  <annotationBlock>
                     <note xml:id="n1"> This series of sentences .... </note>
                     <interp ana="#n1" inst="#sp1"/>
                     <span from="#s1" to="#s3" xml:id="sp1"/>
                  </annotationBlock>
               </egXML>
            </div>
            <div>
               <head>Named entity recognition within the OA model</head>
               <div>
                  <head>Introduction</head>
                  <p>Named entity recognition is a typical use case for stand-off annotation. It is usually based upon an automatic analysis process of a digital text which produces various hypotheses
                     as to which entities (persons, events, organisations, dates, etc.) are actually mentionned. Given the variety of possible hypotheses, and the quantity of information that a NER
                     module may produce, it does not make sense in putting the resulting annotation inline. Besides, there is a need to record some specific metadata related to the NER process such as
                     the tool that has been used, the parameters given to the tool, etc.</p>
                  <p>The idea here is to contribute to the definition of a standardised output interface for NER components or online services so that such annotations can actually be re-used,
                     compared, visualised in a systematic way.</p>
               </div>
               <div>
                  <head>General document organisation for NER</head>
                  <egXML xmlns="http://www.tei-c.org/ns/Examples">
                     <TEI>
                        <teiHeader>
                           <!-- The header of the main document being annotated -->
                        </teiHeader>
                        <standOff>
                           <teiHeader>
                              <!-- The header of the annotation part -->
                           </teiHeader>
                           <listAnnotation>
                              <!-- The annotations -->
                           </listAnnotation>
                        </standOff>
                        <text>
                           <body>
                              <p>
                                 <!-- The text being annotated, possibly segmented (e.g. in <w>) -->
                              </p>
                           </body>
                        </text>
                     </TEI>
                  </egXML>
               </div>
               <div>
                  <head>Grouping NER annotations with <gi>listAnnotation</gi></head>
                  <p>NER annotations are usually organised according to the type of recognised entities. This facilitates the further filtering of the output of a NER Process when a user only needs a
                     specific type of entities. A typical output may thus be represented as follows:</p>
                  <egXML xmlns="http://www.tei-c.org/ns/Examples">
                     <standOff>
                        <listAnnotation type="individuals"> ... </listAnnotation>
                        <listAnnotation type="places">...</listAnnotation>
                        <listAnnotation type="organizations">...</listAnnotation>
                        <listAnnotation type="dateTimes"> </listAnnotation> ... </standOff>
                  </egXML>
               </div>
               <div>
                  <head>Elementary NER annotations</head>
                  <egXML xmlns="http://www.tei-c.org/ns/Examples">
                     <annotationBlock>
                        <person xml:id="E2N1">
                           <persName>LÃ©o Hamon</persName>
                        </person>
                        <interp ana="#E2N1" inst="#d1e80"/>
                        <span from="#E2T5" to="#E2T6" xml:id="d1e80"/>
                     </annotationBlock>
                  </egXML>
                  <egXML xmlns="http://www.tei-c.org/ns/Examples">
                     <annotationBlock>
                        <person xml:id="_6117323d2cabbc17d44c2b44587f682c">
                           <persName type="rawName">John Smith</persName>
                        </person>
                        <interp ana="#_6117323d2cabbc17d44c2b44587f682c" inst="#_b02f28110aa52495b3ec386d171bc20f"/>
                        <span from="#string-range(//p[@xml:id='_899607cd21ce83fb3a8e35652ace2479'],259,269)" xml:id="_b02f28110aa52495b3ec386d171bc20f"/>
                     </annotationBlock>
                  </egXML>
               </div>
               <div>
                  <head>Dealing with additional issues</head>
                  <note>We need to mention how we represent weighting and ranking</note>
               </div>
            </div>
         </div>
         <div xml:id="MAF">
            <head>Morphosyntactic annotation</head>
            <p><ref target="#ISO24611">ISO 24611 (MAF)</ref> contains a TEI based serialisation for morpho-syntactic annotations. The underlying model of ISO 24611 is based upon a two level model
               distinguishing between:</p>
            <list>
               <item>Tokens: elementary units segmented in the source textual content, and</item>
               <item>Word forms: the abstract lexical units that may group together one or several tokens.</item>

            </list>
            <note>A token can also be associated to more than one word forms, e.g. in French: <mentioned>du</mentioned>, combining <mentioned>de</mentioned> and <mentioned>le</mentioned>.</note>
            <p>In this use case, we make the assumption that the text is tokenized inline by means of <gi>w</gi> elements as follows, with each token being associated to a unique identifier by means
               of an <att>xml:id</att> attribute:</p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples">
               <text>
                  <body> ... <p>
                        <w xml:id="w1">I</w>
                        <w xml:id="w2">wanna</w>
                        <w xml:id="w3">put</w>
                        <w xml:id="w4">up</w>
                        <w xml:id="w5">new</w>
                        <w xml:id="w6">wallpaper</w>
                        <pc>.</pc>
                     </p> ... </body>
               </text>
            </egXML>

            <p>In conformance to <ref target="#ISO24611">ISO 24611 (MAF)</ref>, word forms are represented by <gi>span</gi> elements, pointing to the corresponding token(s) in the source text (see the
               note below soncerning the use of the proper attributes). The actual analysis of the word form is provided by means of a feature-structure referred to from the <gi>span</gi> element by
               means of an <att>ana</att> attribute. The additional <att>corresp</att> attribute allows one to point to the lexical entries equivalent to the word form, when one links the
               morpho-synytactic annotation to a reference lexicon.</p>

            <note>This representation is not conformant to the Open Annotation model. In some way, the <gi>span</gi> element combines both roles of <mentioned>Target</mentioned> and
                  <mentioned>Annotation</mentioned> from WADM. The actual <mentioned>Body</mentioned> is made of both the feature structure and the lexical entry that are being pointing to.</note>
            <note>To be checked: should we use <att>from</att> and <att>to</att> instead of <att>target</att> here.</note>

            <egXML xmlns="http://www.tei-c.org/ns/Examples">
               <standOff type="morphosyntax" notation="ISO24611">
                  <teiHeader>
                     <!-- here example of a reference to a tool -->
                  </teiHeader>
                  <listAnnotation type="wordForms">
                     <!-- One <annotationBlock> per sentence (cf. speech annotation) -->
                     <annotationBlock> </annotationBlock>
                     <annotationBlock><spanGrp type="wordForm">
                           <span target="#w1" ana="#fs1" corresp="#entry1"/>
                           <span target="#w2" ana="#fs2" corresp="#entry2"/>
                           <span target="#w2" ana="#fs3" corresp="#entry3"/>
                           <span target="#w3 #w4" ana="#fs4" corresp="#entry4"/>
                           <span target="#w5" ana="#fs5" corresp="#entry5"/>
                           <span target="#w6" ana="#fs6" corresp="#entry6"/>
                        </spanGrp>
                     </annotationBlock>
                  </listAnnotation>
                  <listAnnotation type="wordFormProperties">
                     <fs xml:id="fs1" corresp="#entry1">
                        <f name="lemma">
                           <string>I</string>
                        </f>
                        <f name="pos">
                           <symbol value="PP"/>
                        </f>
                     </fs>
                     <fs xml:id="fs2">
                        <f name="lemma">
                           <string>want</string>
                        </f>
                        <f name="pos">
                           <symbol value="VBP"/>
                        </f>
                     </fs>
                     <fs xml:id="fs3">
                        <f name="lemma">
                           <string>to</string>
                        </f>
                        <f name="pos">
                           <symbol value="TO"/>
                        </f>
                     </fs>
                     <fs xml:id="fs4">
                        <f name="lemma">
                           <string>put up</string>
                        </f>
                        <f name="pos">
                           <symbol value="VB"/>
                        </f>
                     </fs>
                     <fs xml:id="fs5">
                        <f name="lemma">
                           <string>new</string>
                        </f>
                        <f name="pos">
                           <symbol value="JJ"/>
                        </f>
                     </fs>
                     <fs xml:id="fs6">
                        <f name="lemma">
                           <string>wallpaper</string>
                        </f>
                        <f name="pos">
                           <symbol value="NN"/>
                        </f>
                     </fs>
                  </listAnnotation>
               </standOff>
            </egXML>

            <p> The assumption is made here that a lexical resource is avialable and encodded according the ongoing work on <ref target="#ISO24613-4">LMF part 4 (TEI serialisation)</ref>
            </p>

            <egXML xmlns="http://www.tei-c.org/ns/Examples">
               <TEI type="lexicon">
                  <text>
                     <body>
                        <entry xml:id="entry1">
                           <form type="lemma">
                              <orth>I</orth>
                           </form>
                        </entry>
                        <entry xml:id="entry2">
                           <form type="lemma">
                              <orth>want</orth>
                           </form>
                        </entry>
                        <entry xml:id="entry3">
                           <form type="lemma">
                              <orth>to</orth>
                           </form>
                        </entry>
                        <entry xml:id="entry4">
                           <form type="lemma">
                              <orth>put up</orth>
                           </form>
                        </entry>
                        <entry xml:id="entry5">
                           <form type="lemma">
                              <orth>new</orth>
                           </form>
                        </entry>
                        <entry xml:id="entry6">
                           <form type="lemma">
                              <orth>wallpaper</orth>
                           </form>
                        </entry>
                     </body>
                  </text>
               </TEI>
            </egXML>
         </div>
         <div xml:id="RAF">
            <head>Reference annotation</head>
            <p>Reference annotation consists in identifying referring expression in text or discourse and qualify the relation between them (e.g. anaphorical links) or with existing or putative
               external entities (e.g. in the case of deixis).</p>
            <p>The work carried out within the project <ref target="#ISO24617-9">ISO 24617-9 (RAF)</ref> distinguishes to this purpose two types of annotation entities between which various types of
               links can hold:</p>
            <list>
               <item>referring expressions</item>
               <item>discourse entities</item>
            </list>

         </div>
         <div xml:id="Spoken">
            <head>Parallel annotation of spoken utterances</head>
            <egXML xmlns="http://www.tei-c.org/ns/Examples">
               <annotationBlock who="#SPK0" start="#T0" end="#T2">
                  <u><w xml:id="w1">And</w><w xml:id="w2">what</w>
                     <anchor synch="#T1"/><w xml:id="w3">comes</w>
                  </u>
                  <spanGrp type="pos">
                     <span from="#w1" to="#w1">CONJ</span><span from="#w2" to="#w2">RELPRO</span><span from="#w3" to="#w3">V</span>
                  </spanGrp>
                  <spanGrp type="prosody">
                     <span from="#T0" to="#T1">faster</span>
                  </spanGrp>
               </annotationBlock>
            </egXML>

            <egXML xmlns="http://www.tei-c.org/ns/Examples">
               <TEI>
                  <teiHeader>...</teiHeader>
                  <standOff type="multilayerTranscription" notation="ISO24624">
                     <teiHeader>...</teiHeader>
                     <listAnnotation>
                        <annotationBlock corresp="#u1">
                           <spanGrp type="pos">
                              <span from="#w1" to="#w1">CONJ</span>
                              <span from="#w2" to="#w2">RELPRO</span>
                              <span from="#w3" to="#w3">V</span>
                           </spanGrp>
                           <spanGrp type="prosody">
                              <span from="#T0" to="#T1">faster</span>
                           </spanGrp>
                        </annotationBlock>
                     </listAnnotation>
                  </standOff>
                  <text> ... <u xml:id="u1" who="#SPK0" start="#T0" end="#T2">
                        <w xml:id="w1">And</w>
                        <w xml:id="w2">what</w>
                        <anchor synch="#T1"/>
                        <w xml:id="w3">comes</w>
                     </u>
                  </text>
               </TEI>
            </egXML>
         </div>
         <div xml:id="IssuesHeader">
            <head>Issues related to the header on <gi>standOff</gi></head>
            <note>Annotating annotators, annotation tools, source documents in the case of legacy annotations (from other formats)</note>
            <note>Using <att>resp</att> and point to <gi>appInfo</gi> (machine) or <gi>author</gi> (human annotator): do we need a ticket to reconcile the two?</note>
         </div>
         <div xml:id="ContentModelAnnotationBlock">
            <head>Towards a content model for <gi>annotationBlock</gi></head>
            <note>Intro: focusing on <gi>annotationBlock</gi></note>
            <p>In the case of an OA compliant model, the content model of <gi>annotationBlock</gi> shall be based upon three classes:</p>
            <list>
               <item><code>model.OATarget</code></item>
               <item><code>model.OABody</code></item>
               <item><code>model.OAAnnotation</code>: a mandatory class reference for this annotation profile. The class should contain <gi>interp</gi> by default and one should be cautious in adding
                  extra element to avoid ambiguous content models when the added element may also appear in the other classes.</item>
            </list>
            <egXML xmlns="http://www.tei-c.org/ns/Examples">
               <content>
                  <sequence>
                     <classRef key="model.OABody" minOccurs="0" maxOccurs="unbounded"/>
                     <classRef key="model.OAAnnotation" minOccurs="1" maxOccurs="1"/>
                     <classRef key="model.OATarget" minOccurs="0" maxOccurs="unbounded"/>
                  </sequence>
               </content>
            </egXML>

            <p>In order to differentiate between the different encoding variants we have identified, the <gi>annotationBlock</gi> element must be associated to a <att>notation</att> attribute <note
                  place="inline">Could also be <att>mode</att></note> which can take one of the following values:</p>
            <list>
               <item><code>inSitu</code>: non stand-off usage of annotation Block as documented in the <title>Transcriptions of speech</title> chapter.</item>
               <item><code>OAModel</code>: Open Annotation compliant model (Target, Body, Annotation)</item>
            </list>
         </div>
      </body>
      <back>
         <div>
            <head>References</head>
            <listBibl type="references">
               <bibl xml:id="WADM"><title>Web Annotation Data Model</title>, W3C Recommendation 23 February 2017, <ptr target="https://www.w3.org/TR/2017/REC-annotation-model-20170223/"/></bibl>
               <bibl xml:id="ISO24611"><title>ISO 24611:2012 Language resource management -- Morpho-syntactic annotation framework (MAF)</title>, <ptr target="https://www.iso.org/standard/51934.html"
                  /></bibl>
               <bibl xml:id="ISO24613-4"><title>ISO 24613-4 Language resource management - Lexical markup framework (LMF) - Part 4: TEI serialisation</title></bibl>
               <bibl xml:id="ISO24624"><time>ISO 24624:2016 Language resource management -- Transcription of spoken language</time>, <ptr target="https://www.iso.org/standard/37338.html"/></bibl>
               <bibl xml:id="ISO24617-9"><time>ISO/AWI 24617-9 Language resource management -- Semantic annotation framework -- Part 9: Reference annotation framework (RAF)</time>, <ptr
                     target="https://www.iso.org/standard/69658.html?browse=tc"/></bibl>
            </listBibl>
         </div>
         <div>
            <head>Issues</head>
            <p>Should not <att>resp</att> be made global?</p>
            <p>Should we document the importance of typing <gi>span</gi> to indicate the granularity of the object that is being referred to?</p>
            <p><gi>interp</gi> should also be typed, with inheritance mechanisms from <gi>annotationBlock</gi></p>
         </div>
      </back>
   </text>
</TEI>
